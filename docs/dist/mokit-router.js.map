{"version":3,"sources":["webpack:///webpack/bootstrap 28cd43993d137c168421","webpack:///./lib/index.js","webpack:///./~/.1.0.5@mokit-plugin/index.js","webpack:///./lib/router.js","webpack:///./~/.0.0.3@general-router/lib/index.js","webpack:///./~/.2.0.15@ntils/index.js","webpack:///./lib/drivers/hash.js","webpack:///./lib/components/router-view.js","webpack:///./lib/directives/link.js"],"names":["Plugin","require","module","exports","factory","thunk","opts","entity","install","mokit","use","utils","Class","EventEmitter","Component","RouterBase","HashDirver","RouterView","LinkDirective","ROOT_PATH","Router","$name","$extends","constructor","options","$super","create","view","emitter","dirvier","on","_onChanged","bind","_view","Error","_router","get","path","fromPath","toPath","resolveUri","split","routes","length","route","query","parseQuery","setTimeout","switchTo","component","_transition","$emit","go","transition","set","map","each","pattern","item","isString","addOne","toUri","fromUri","baseDir","substring","lastIndexOf","uriParts","uriHash","newUriParts","forEach","part","pop","push","join","queryString","location","href","pairs","pair","strs","start","root","element","app","$appendTo","owner","Object","defineProperty","prototype","$parent","$router","router","directive","PLACE_HOLDER_EXPR","COLLECT_EXPR_STR","GREEDY_COLLECT_EXPR_STR","routeInstanceProto","actionUrl","action","self","withoutActionUrl","replace","table","add","_parseKeyDef","_keyDefStr","keyDefStr","keyDefParts","keyDef","name","greedy","expr","RegExp","lastIndex","keyDefs","match","keys","exprStr","i","index","collectExprStr","methods","defaultMethods","method","toUpperCase","__proto__","_name","_route","toString","nameParts","target","targetParts","controller","_parseDynamicAction","indexOf","params","key","val","_createRouteInstance","srcRoute","url","routeInstance","urlParts","slice","handleActionFromUrl","routeArray","isNull","test","values","exec","failed","parseActionFromUrl","_routeArray","_getForActionFromUrl","apply","ctrlRouteUrl","ctrlRouteArray","filter","actionFromUrl","matchByMethod","ntils","noop","obj","trim","str","str1","str2","startWith","contains","endWith","has","hasProperty","hasOwnProperty","isFunction","String","isNumber","Number","isBoolean","Boolean","isElement","window","Element","tagName","nodeType","nodeName","attributes","ownerDocument","isText","Text","isObject","isArray","v1","call","v2","Array","v3","splice","v4","isDate","Date","isRegexp","toArray","array","toDate","list","handler","scope","listLength","rs","formatDate","date","format","dict","placeholder","getMonth","getDate","getHours","getMinutes","getSeconds","getDay","Math","floor","getMilliseconds","$1","getFullYear","substr","value","copy","src","dst","igonres","getOwnPropertyDescriptor","ex","clone","objClone","defineFreezeProp","mix","mode","enumerable","configurable","writable","err","proto","props","Cotr","setPrototypeOf","getPrototypeOf","deepEqual","a","b","aKeys","bKeys","allKeys","concat","checkedMap","result","fromTo","fromNum","toNum","step","abs","newGuid","S4","random","fn","buffer","setByPath","getByPath","unique","newArray","getFunctionArgumentNames","parts","short","maxLength","strLength","trimLength","firstUpper","toLowerCase","escapeRegExp","parseDom","_PDD_","document","createElement","innerHTML","firstNode","childNodes","cloneNode","SEPARATOR","HashDriver","addEventListener","_onChange","hash","emit","View","components","extend","properties","onCreated","Directive","literal","eventTarget","node","$target","emiter","addListener","decorates","unbind","removeListener","update"],"mappings":"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","file":"./mokit-router.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 28cd43993d137c168421","const Plugin = require('mokit-plugin');\nmodule.exports = new Plugin(function () {\n  return require('./router');\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/index.js","const factory = function (thunk) {\n  function Plugin(opts) {\n    return typeof Plugin.entity === 'function' ?\n      new Plugin.entity(opts) : Plugin.entity;\n  }\n  Plugin.install = function (mokit) {\n    factory.mokit = mokit;\n    this.entity = thunk();\n    this.entity.install(mokit);\n  };\n  if (typeof mokit !== 'undefined') {\n    mokit.use(Plugin);\n  }\n  return Plugin;\n};\n\nmodule.exports = factory;\n\n\n// WEBPACK FOOTER //\n// ./~/.1.0.5@mokit-plugin/index.js","const mokit = require('mokit-plugin').mokit;\nconst utils = mokit.utils;\nconst Class = mokit.Class;\nconst EventEmitter = mokit.EventEmitter;\nconst Component = mokit.Component;\nconst RouterBase = require('general-router');\nconst HashDirver = require('./drivers/hash');\nconst RouterView = require('./components/router-view');\nconst LinkDirective = require('./directives/link');\n\nconst ROOT_PATH = '/';\n\nconst Router = new Class({\n  $name: 'Router',\n  $extends: RouterBase,\n\n  /**\n   * 路由类构造函数\n   * @param {Object} options 选项\n   * @returns {void} 无返回\n   */\n  constructor: function (options) {\n    this.$super();\n    options = options || utils.create(null);\n    if (options.view) this.view = options.view;\n    this.emitter = new EventEmitter(this);\n    this.dirvier = options.dirvier || new HashDirver(this);\n    this.dirvier.on('changed', this._onChanged.bind(this));\n  },\n\n  /**\n   *「路由视组」访问器\n   * @returns {RouterView} 路由视图组件实例\n   */\n  get view() {\n    return this._view;\n  },\n\n  /**\n   *「路由视组」设置器\n   * @param {RouterView} view 路由视图组件实例\n   * @returns {void} 无返回\n   */\n  set view(view) {\n    if (!(view instanceof RouterView)) {\n      throw new Error('Invalid RouterView');\n    }\n    this._view = view;\n    this._view._router = this;\n    this._onChanged(this.dirvier.get());\n  },\n\n  /**\n   * 路由发生变化时的处理函数\n   * @param {string} path 将要转到的路径\n   * @returns {void} 无返回\n   */\n  _onChanged: function (path) {\n    path = path || '/';\n    let fromPath = this.dirvier.get();\n    let toPath = this.resolveUri(path, fromPath);\n    toPath = path.split('?')[0].split('!')[0];\n    let routes = this.get(toPath);\n    if (!routes || routes.length < 1) return;\n    this.route = routes[0];\n    this.route.path = toPath;\n    this.route.query = this.parseQuery();\n    if (this.view) {\n      setTimeout(function () {\n        this.view.switchTo(this.route.component, this._transition);\n        this._transition = null;\n      }.bind(this), 0);\n    }\n    this.emitter.$emit('enter', toPath);\n    this.emitter.$emit('leave', fromPath);\n  },\n\n  /**\n   * 转到一个路径\n   * @param {string} path 将要转到的路径\n   * @param {Object} transition 转场动画\n   * @returns {void} 无返回\n   */\n  go: function (path, transition) {\n    this._transition = transition;\n    this.dirvier.set(path);\n  },\n\n  /**\n   * 映射路由配置\n   * @param {Object} map 路由配置\n   * @returns {void} 无返回\n   */\n  map: function (map) {\n    utils.each(map, function (pattern, item) {\n      if (utils.isString(item)) {\n        item = map[item];\n      }\n      if (item instanceof Component) {\n        item = {\n          component: item\n        };\n      }\n      if (!item) throw new Error('Invalid route `' + pattern + '`');\n      item.pattern = pattern;\n      this.addOne(item);\n    }, this);\n  },\n\n  /**\n   * 解析相对路径\n   * @param {string} toUri 原始路径\n   * @param {string} fromUri 参数路径\n   * @returns {string} 解析后的相关路径\n   */\n  resolveUri: function (toUri, fromUri) {\n    toUri = toUri || ROOT_PATH;\n    if (toUri[0] == ROOT_PATH) return toUri;\n    fromUri = fromUri || ROOT_PATH;\n    fromUri = fromUri.split('?')[0].split('#')[0];\n    let baseDir = fromUri.substring(0, fromUri.lastIndexOf(ROOT_PATH));\n    let uriParts = toUri.split('#')[0].split(ROOT_PATH);\n    let uriHash = toUri.split('#')[1];\n    let newUriParts = baseDir.length > 0 ? baseDir.split(ROOT_PATH) : [];\n    uriParts.forEach(function (part) {\n      if (part == '..') {\n        newUriParts.pop();\n      } else if (part && part != '.') {\n        newUriParts.push(part);\n      }\n    }, this);\n    return ROOT_PATH + newUriParts.join(ROOT_PATH) + (uriHash ? '#' + uriHash : '');\n  },\n\n  /**\n   * 解析查询字符串并生成查询参数对象\n   * @returns {Object} 查询参数对象\n   */\n  parseQuery: function () {\n    let queryString = (location.href.split('#')[1] || '').split('?')[1] || '';\n    let pairs = queryString.split('&');\n    let query = utils.create(null);\n    pairs.forEach(function (pair) {\n      let strs = pair.split('=');\n      query[strs[0]] = strs[1];\n    }, this);\n    return query;\n  },\n\n  /**\n   * 启动应用\n   * @param {Component} root 应用根组件类\n   * @param {element} element 挂载元素\n   * @returns {Component} 应用根件实例\n   */\n  start: function (root, element) {\n    this.app = new root({\n      _router: this\n    });\n    this.app.$appendTo(element);\n    return this.app;\n  }\n\n});\n\nRouter.HashDirver = HashDirver;\n\n/**\n * 路由插件安装方法\n * @param {Component} owner 组件类\n * @returns {void} 无返回\n */\nRouter.install = function (owner) {\n\n  owner.Router = this;\n\n  //为组件实例扩展 $router 属性\n  Object.defineProperty(owner.prototype, '$router', {\n    get: function () {\n      if (this instanceof RouterView) {\n        return this._router || (this.$parent && this.$parent.$router);\n      } else if (this.$parent) {\n        return this.$parent.$router;\n      } else if (!this.$parent) {\n        return this._router || this.router;\n      } else {\n        return null;\n      }\n    }\n  });\n\n  //为组件实例扩展 $route 属性\n  Object.defineProperty(owner.prototype, '$route', {\n    get: function () {\n      return this.$router && this.$router.route;\n    }\n  });\n\n  //添加全局组件 RouterView\n  owner.component('RouterView', RouterView);\n\n  //添加 link 指令\n  owner.directive('link', LinkDirective);\n\n};\n\nmodule.exports = Router;\n\n\n// WEBPACK FOOTER //\n// ./lib/router.js","const utils = require('ntils');\n\n/**\n * 定义正则表达式常量\n */\nconst PLACE_HOLDER_EXPR = /\\{.+?\\}/gim;\nconst COLLECT_EXPR_STR = '([^\\\\/]+)';\nconst GREEDY_COLLECT_EXPR_STR = '(.+)';\n\n/**\n * 定义路由实例扩展 __proto__\n **/\nconst routeInstanceProto = {};\n\n/**\n * 生成 action URL\n * @param {String} action action 名称\n * @return {String} 对应的 path\n **/\nrouteInstanceProto.actionUrl = function (action) {\n  let self = this;\n  let actionUrl = self.withoutActionUrl + '/' + action;\n  actionUrl = actionUrl.replace(/\\/\\//igm, '/');\n  return actionUrl;\n};\n\n/**\n * 定义路由对象\n * @param {Object} routes 路由眏射表\n * @param {Object} options 选项\n * @returns {void} 无返回\n */\nfunction Router(routes, options) {\n  let self = this;\n  options = options || {};\n  self.options = options;\n  self.table = [];\n  if (routes) {\n    self.add(routes);\n  }\n}\n\n/**\n * 解析占位符 key 定义\n * @param {String} _keyDefStr 占位符定义\n * @returns {Object} 占符符信息对象\n **/\nRouter.prototype._parseKeyDef = function (_keyDefStr) {\n  let keyDefStr = _keyDefStr.substring(1, _keyDefStr.length - 1);\n  let keyDefParts = keyDefStr.split(':');\n  let keyDef = {};\n  keyDef.name = keyDefParts[0];\n  if (keyDef.name[0] == '*') {\n    keyDef.greedy = true;\n    keyDef.name = keyDef.name.substring(1);\n  }\n  if (keyDefParts[1]) {\n    keyDef.expr = new RegExp(keyDefParts[1], 'igm');\n  }\n  return keyDef;\n};\n\n/**\n * 添加一个路由配置\n * @param {Object} route 路由项\n * @returns {void} 无返回\n */\nRouter.prototype.addOne = function (route) {\n  let self = this;\n  if (!route || !route.pattern) return;\n  //取到所有路由key\n  PLACE_HOLDER_EXPR.lastIndex = 0;\n  let keyDefs = route.pattern.match(PLACE_HOLDER_EXPR) || [];\n  route.keys = {};\n  //初始化 url 匹配测试表达式字符串\n  let exprStr = '^' + route.pattern + '$';\n  utils.each(keyDefs, function (i) {\n    //处理 key 定义\n    let keyDef = self._parseKeyDef(keyDefs[i]);\n    route.keys[keyDef.name] = {\n      index: i,\n      expr: keyDef.expr\n    };\n    //将 'key 占位符' 的表达式，替换为 '提交值的正则表达式'\n    let collectExprStr = keyDef.greedy ? GREEDY_COLLECT_EXPR_STR : COLLECT_EXPR_STR;\n    exprStr = exprStr.replace(keyDefs[i], collectExprStr);\n  });\n  //生成 url 匹配测试表达式\n  route.expr = new RegExp(exprStr, 'igm');\n  //处理所有 route 的 method \n  route.methods = route.methods || self.options.defaultMethods;\n  if (route.methods && route.methods.length > 0) {\n    route.methods = route.methods.map(function (method) {\n      return method.toUpperCase();\n    });\n  }\n  //继承原型\n  route.__proto__ = routeInstanceProto;\n  self.table.push(route);\n};\n\n/**\n * 添加一组路由配置表\n * @param {Route} routes 一个路由实体,格式:{pattern:'',target:object}\n * @returns {void} 无返回\n */\nRouter.prototype.add = function (routes) {\n  let self = this;\n  utils.each(routes, function (_name, _route) {\n    //判断是字符串还是一个对象，并都将 _route 转为对象\n    let route = utils.isString(_route) ? {\n      'target': _route\n    } : _route;\n    //尝试从名称中解析出 method 和 pattern\n    let name = (_name || '/').toString();\n    let nameParts = name.split(' ');\n    if (nameParts.length > 1) {\n      route.methods = nameParts[0].split(',');\n      route.pattern = route.pattern || nameParts[1];\n    } else {\n      route.pattern = route.pattern || nameParts[0];\n    }\n    //解析 controller 和 action\n    //target 和 controller 不可同时配置，target 可以为 'controller action' 这样的格式\n    if (route.target) {\n      let targetParts = route.target.split(' ');\n      route.controller = route.controller || targetParts[0];\n      route.action = route.action || targetParts[1];\n    }\n    route.target = route.controller;\n    //添加 route\n    self.addOne(route);\n  });\n};\n\n/**\n * 解析路由动态 action\n * @param {Object} route 路由项\n * @returns {Object} 解析后路由项\n **/\nRouter.prototype._parseDynamicAction = function (route) {\n  if (route &&\n    route.action &&\n    route.action.indexOf('{') > -1) {\n    utils.each(route.params, function (key, val) {\n      route.action = utils.replace(route.action, '{' + key + '}', val);\n    });\n  }\n  return route;\n};\n\n/**\n * 创建一个路由实例\n * @param {object} srcRoute 路由项原型 proto\n * @param {String} url URL\n * @param {Object} params 参数\n * @returns {Object} 路由实例\n **/\nRouter.prototype._createRouteInstance = function (srcRoute, url, params) {\n  let self = this;\n  let routeInstance = {\n    __proto__: srcRoute\n  };\n  routeInstance.params = params;\n  if (routeInstance.action) {\n    let urlParts = url.split('/');\n    routeInstance.withoutActionUrl = urlParts.slice(0, urlParts.length - 1);\n  } else {\n    routeInstance.withoutActionUrl = url;\n  }\n  routeInstance = self._parseDynamicAction(routeInstance);\n  return routeInstance;\n};\n\n/**\n * 通过请求路径获取第一个匹配的路由\n * @param {String} url 请求路径\n * @param {Boolean} handleActionFromUrl 是否从 URL 中分析 action\n * @returns {Route} 路由实体\n */\nRouter.prototype.get = function (url, handleActionFromUrl) {\n  let self = this;\n  let routeArray = [];\n  if (utils.isNull(url)) {\n    return routeArray;\n  }\n  //url = url.replace(/\\/\\//igm, '/');\n  utils.each(self.table, function (i, route) {\n    route.expr.lastIndex = 0;\n    if (!route.expr.test(url)) return;\n    //通过子表达式 '正则的()' 取值\n    route.expr.lastIndex = 0;\n    let values = route.expr.exec(url);\n    //生成 params\n    let params = {};\n    let failed = utils.each(route.keys, function (key, keyDef) {\n      params[key] = values[keyDef.index + 1];\n      if (!keyDef.expr) return;\n      keyDef.expr.lastIndex = 0;\n      if (!keyDef.expr.test(params[key])) {\n        return true;\n      }\n    });\n    if (failed) return;\n    routeArray.push(self._createRouteInstance(route, url, params));\n  });\n  //确定 parseActionFromUrl 的值\n  handleActionFromUrl = utils.isNull(handleActionFromUrl) ?\n    self.options.parseActionFromUrl : handleActionFromUrl;\n  //如果需要 parseActionFromUrl\n  if (handleActionFromUrl) {\n    let _routeArray = self._getForActionFromUrl(url);\n    routeArray.push.apply(routeArray, _routeArray);\n  }\n  return routeArray;\n};\n\n/**\n * 从 url 中分解出来 action ，然后获取 route array\n * @param {String} url 路径\n * @returns {Object} 路由实例\n **/\nRouter.prototype._getForActionFromUrl = function (url) {\n  let self = this;\n  /*\n  一是在如果直接匹配不成功时，才将 “/” 分隔的最后一个 “字串” 当作 action 进行再一次匹配\n  */\n  let urlParts = url.split('/');\n  let lastIndex = urlParts.length - 1;\n  let action = urlParts[lastIndex];\n  //检查分解出来的 action 是否合法\n  if (action === '' || action.indexOf('.') > -1) {\n    return null;\n  }\n  let ctrlRouteUrl = urlParts.slice(0, lastIndex).join('/');\n  if (ctrlRouteUrl === '') ctrlRouteUrl = '/';\n  let ctrlRouteArray = self.get(ctrlRouteUrl, false) || [];\n  let routeArray = ctrlRouteArray.filter(function (route) {\n    /**\n     * 从 URL 分解出来的 action 不可能是动态的 action\n     * route.action 没有指定时才能作为 parseAction 的合法 route\n     **/\n    if (route.action) return false;\n    //设定 action 作为指向 action 的 route\n    route.action = action;\n    //标记一下 action 在 url 中\n    route.actionFromUrl = true;\n    return true;\n  });\n  return routeArray;\n};\n\n/**\n * 过滤出包含指定 method 的 route\n * @param {array} routeArray 路由实例数组\n * @param {String} method HTTP method\n * @returns {Object} 匹配的路由实例\n **/\nRouter.prototype.matchByMethod = function (routeArray, method) {\n  if (!routeArray || routeArray.length < 1) {\n    return routeArray;\n  }\n  return routeArray.filter(function (route) {\n    if (!route || !route.methods || route.methods.length < 1) {\n      return false;\n    }\n    return route.methods.indexOf(method) > -1;\n  })[0];\n};\n\nmodule.exports = Router;\n\n/*end*/\n\n\n// WEBPACK FOOTER //\n// ./~/.0.0.3@general-router/lib/index.js","(function (ntils) {\n\n  /**\n   * 空函数\n   */\n  ntils.noop = function () { };\n\n  /**\n   * 验证一个对象是否为NULL\n   * @method isNull\n   * @param  {Object}  obj 要验证的对象\n   * @return {Boolean}     结果\n   * @static\n   */\n  ntils.isNull = function (obj) {\n    return obj === null || typeof obj === \"undefined\";\n  };\n\n  /**\n   * 除去字符串两端的空格\n   * @method trim\n   * @param  {String} str 源字符串\n   * @return {String}     结果字符串\n   * @static\n   */\n  ntils.trim = function (str) {\n    if (this.isNull(str)) return str;\n    if (str.trim) {\n      return str.trim();\n    } else {\n      return str.replace(/(^[\\\\s]*)|([\\\\s]*$)/g, \"\");\n    }\n  };\n\n  /**\n   * 替换所有\n   * @method replace\n   * @param {String} str 源字符串\n   * @param {String} str1 要替换的字符串\n   * @param {String} str2 替换为的字符串\n   * @static\n   */\n  ntils.replace = function (str, str1, str2) {\n    if (this.isNull(str)) return str;\n    return str.replace(new RegExp(str1, 'g'), str2);\n  };\n\n  /**\n   * 从字符串开头匹配\n   * @method startWith\n   * @param {String} str1 源字符串\n   * @param {String} str2 要匹配的字符串\n   * @return {Boolean} 匹配结果\n   * @static\n   */\n  ntils.startWith = function (str1, str2) {\n    if (this.isNull(str1) || this.isNull(str2)) return false;\n    return str1.indexOf(str2) === 0;\n  };\n\n  /**\n   * 是否包含\n   * @method contains\n   * @param {String} str1 源字符串\n   * @param {String} str2 检查包括字符串\n   * @return {Boolean} 结果\n   * @static\n   */\n  ntils.contains = function (str1, str2) {\n    var self = this;\n    if (this.isNull(str1) || this.isNull(str2)) return false;\n    return str1.indexOf(str2) > -1;\n  };\n\n  /**\n   * 从字符串结束匹配\n   * @method endWidth\n   * @param {String} str1 源字符串\n   * @param {String} str2 匹配字符串\n   * @return {Boolean} 匹配结果\n   * @static\n   */\n  ntils.endWith = function (str1, str2) {\n    if (this.isNull(str1) || this.isNull(str2)) return false;\n    return str1.indexOf(str2) === (str1.length - str2.length);\n  };\n\n  /**\n   * 是否包含属性\n   * @method hasProperty\n   * @param  {Object}  obj  对象\n   * @param  {String}  name 属性名\n   * @return {Boolean}      结果\n   * @static\n   */\n  ntils.has = ntils.hasProperty = function (obj, name) {\n    if (this.isNull(obj) || this.isNull(name)) return false;\n    return (name in obj) || (obj.hasOwnProperty(name));\n  };\n\n  /**\n   * 验证一个对象是否为Function\n   * @method isFunction\n   * @param  {Object}  obj 要验证的对象\n   * @return {Boolean}     结果\n   * @static\n   */\n  ntils.isFunction = function (obj) {\n    if (this.isNull(obj)) return false;\n    return typeof obj === \"function\";\n  };\n\n  /**\n   * 验证一个对象是否为String\n   * @method isString\n   * @param  {Object}  obj 要验证的对象\n   * @return {Boolean}     结果\n   * @static\n   */\n  ntils.isString = function (obj) {\n    if (this.isNull(obj)) return false;\n    return typeof obj === 'string' || obj instanceof String;\n  };\n\n  /**\n   * 验证一个对象是否为Number\n   * @method isNumber\n   * @param  {Object}  obj 要验证的对象\n   * @return {Boolean}     结果\n   * @static\n   */\n  ntils.isNumber = function (obj) {\n    if (this.isNull(obj)) return false;\n    return typeof obj === 'number' || obj instanceof Number;\n  };\n\n  /**\n   * 验证一个对象是否为Boolean\n   * @method isBoolean\n   * @param  {Object}  obj 要验证的对象\n   * @return {Boolean}     结果\n   * @static\n   */\n  ntils.isBoolean = function (obj) {\n    if (this.isNull(obj)) return false;\n    return typeof obj === 'boolean' || obj instanceof Boolean;\n  };\n\n  /**\n   * 验证一个对象是否为HTML Element\n   * @method isElement\n   * @param  {Object}  obj 要验证的对象\n   * @return {Boolean}     结果\n   * @static\n   */\n  ntils.isElement = function (obj) {\n    if (this.isNull(obj)) return false;\n    if (window.Element) {\n      return obj instanceof Element;\n    } else {\n      return (obj.tagName && obj.nodeType && obj.nodeName && obj.attributes && obj.ownerDocument);\n    }\n  };\n\n  /**\n   * 验证一个对象是否为HTML Text Element\n   * @method isText\n   * @param  {Object}  obj 要验证的对象\n   * @return {Boolean}     结果\n   * @static\n   */\n  ntils.isText = function (obj) {\n    if (this.isNull(obj)) return false;\n    return obj instanceof Text;\n  };\n\n  /**\n   * 验证一个对象是否为Object\n   * @method isObject\n   * @param  {Object}  obj 要验证的对象\n   * @return {Boolean}     结果\n   * @static\n   */\n  ntils.isObject = function (obj) {\n    if (this.isNull(obj)) return false;\n    return typeof obj === \"object\";\n  };\n\n  /**\n   * 验证一个对象是否为Array或伪Array\n   * @method isArray\n   * @param  {Object}  obj 要验证的对象\n   * @return {Boolean}     结果\n   * @static\n   */\n  ntils.isArray = function (obj) {\n    if (this.isNull(obj)) return false;\n    var v1 = Object.prototype.toString.call(obj) === '[object Array]';\n    var v2 = obj instanceof Array;\n    var v3 = !this.isString(obj) && this.isNumber(obj.length) && this.isFunction(obj.splice);\n    var v4 = !this.isString(obj) && this.isNumber(obj.length) && obj[0];\n    return v1 || v2 || v3 || v4;\n  };\n\n  /**\n   * 验证是不是一个日期对象\n   * @method isDate\n   * @param {Object} val   要检查的对象\n   * @return {Boolean}           结果\n   * @static\n   */\n  ntils.isDate = function (val) {\n    if (this.isNull(val)) return false;\n    return val instanceof Date;\n  };\n\n  /**\n   * 验证是不是一个正则对象\n   * @method isDate\n   * @param {Object} val   要检查的对象\n   * @return {Boolean}           结果\n   * @static\n   */\n  ntils.isRegexp = function (val) {\n    return val instanceof RegExp;\n  };\n\n  /**\n   * 转换为数组\n   * @method toArray\n   * @param {Array|Object} array 伪数组\n   * @return {Array} 转换结果数组\n   * @static\n   */\n  ntils.toArray = function (array) {\n    if (this.isNull(array)) return [];\n    return Array.prototype.slice.call(array);\n  };\n\n  /**\n   * 转为日期格式\n   * @method toDate\n   * @param {Number|String} val 日期字符串或整型数值\n   * @return {Date} 日期对象\n   * @static\n   */\n  ntils.toDate = function (val) {\n    var self = this;\n    if (self.isNumber(val))\n      return new Date(val);\n    else if (self.isString(val))\n      return new Date(self.replace(self.replace(val, '-', '/'), 'T', ' '));\n    else if (self.isDate(val))\n      return val;\n    else\n      return null;\n  };\n\n  /**\n   * 遍历一个对像或数组\n   * @method each\n   * @param  {Object or Array}   obj  要遍历的数组或对象\n   * @param  {Function} fn            处理函数\n   * @return {void}                   无返回值\n   * @static\n   */\n  ntils.each = function (list, handler, scope) {\n    if (this.isNull(list) || this.isNull(handler)) return;\n    if (this.isArray(list)) {\n      var listLength = list.length;\n      for (var i = 0; i < listLength; i++) {\n        var rs = handler.call(scope || list[i], i, list[i]);\n        if (!this.isNull(rs)) return rs;\n      }\n    } else {\n      for (var key in list) {\n        var rs = handler.call(scope || list[key], key, list[key]);\n        if (!this.isNull(rs)) return rs;\n      }\n    }\n  };\n\n  /**\n   * 格式化日期\n   * @method formatDate\n   * @param {Date|String|Number} date 日期\n   * @param {String} format 格式化字符串\n   * @param {object} dict 反译字典\n   * @return {String} 格式化结果\n   * @static\n   */\n  ntils.formatDate = function (date, format, dict) {\n    if (this.isNull(format) || this.isNull(date)) return date;\n    date = this.toDate(date);\n    dict = dict || {};\n    var placeholder = {\n      \"M+\": date.getMonth() + 1, //month\n      \"d+\": date.getDate(), //day\n      \"h+\": date.getHours(), //hour\n      \"m+\": date.getMinutes(), //minute\n      \"s+\": date.getSeconds(), //second\n      \"w+\": date.getDay(), //week\n      \"q+\": Math.floor((date.getMonth() + 3) / 3), //quarter\n      \"S\": date.getMilliseconds() //millisecond\n    }\n    if (/(y+)/.test(format)) {\n      format = format.replace(RegExp.$1, (date.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n    }\n    for (var key in placeholder) {\n      if (new RegExp(\"(\" + key + \")\").test(format)) {\n        var value = placeholder[key];\n        value = dict[value] || value;\n        format = format.replace(RegExp.$1, RegExp.$1.length == 1\n          ? value : (\"00\" + value).substr((\"\" + value).length));\n      }\n    }\n    return format;\n  };\n\n  /**\n   * 拷贝对象\n   * @method copy\n   * @param {Object} src 源对象\n   * @param {Object} dst 目标对象\n   * @static\n   */\n  ntils.copy = function (src, dst, igonres) {\n    dst = dst || (this.isArray(src) ? [] : {});\n    this.each(src, function (key) {\n      if (igonres && igonres.indexOf(key) > -1) return;\n      delete dst[key];\n      if (Object.getOwnPropertyDescriptor) {\n        try {\n          Object.defineProperty(dst, key, Object.getOwnPropertyDescriptor(src, key));\n        } catch (ex) {\n          dst[key] = src[key];\n        }\n      } else {\n        dst[key] = src[key];\n      }\n    })\n    return dst;\n  };\n\n  /**\n   * 深度克隆对象\n   * @method clone\n   * @param {Object} src 源对象\n   * @return {Object} 新对象\n   * @static\n   */\n  ntils.clone = function (src, igonres) {\n    if (this.isNull(src) ||\n      this.isString(src) ||\n      this.isNumber(src) ||\n      this.isBoolean(src) ||\n      this.isDate(src)) {\n      return src;\n    }\n    var objClone = src;\n    try {\n      objClone = new src.constructor();\n    } catch (ex) { }\n    this.each(src, function (key, value) {\n      if (objClone[key] != value && !this.contains(igonres, key)) {\n        if (this.isObject(value)) {\n          objClone[key] = this.clone(value, igonres);\n        } else {\n          objClone[key] = value;\n        }\n      }\n    }, this);\n    ['toString', 'valueOf'].forEach(function (key) {\n      if (this.contains(igonres, key)) return;\n      this.defineFreezeProp(objClone, key, src[key]);\n    }, this);\n    return objClone;\n  };\n\n  /**\n   * 合并对象\n   * @method mix\n   * @return 合并后的对象\n   * @param {Object} dst 目标对象\n   * @param {Object} src 源对象\n   * @param {Array} igonres 忽略的属性名,\n   * @param {Number} mode 模式\n   */\n  ntils.mix = function (dst, src, igonres, mode) {\n    //根据模式来判断，默认是Obj to Obj的  \n    if (mode) {\n      switch (mode) {\n        case 1: // proto to proto  \n          return ntils.mix(dst.prototype, src.prototype, igonres, 0);\n        case 2: // object to object and proto to proto  \n          ntils.mix(dst.prototype, src.prototype, igonres, 0);\n          break; // pass through  \n        case 3: // proto to static  \n          return ntils.mix(dst, src.prototype, igonres, 0);\n        case 4: // static to proto  \n          return ntils.mix(dst.prototype, src, igonres, 0);\n        default: // object to object is what happens below  \n      }\n    }\n    //---\n    src = src || {};\n    dst = dst || (this.isArray(src) ? [] : {});\n    this.keys(src).forEach(function (key) {\n      if (this.contains(igonres, key)) return;\n      if (this.isObject(src[key]) &&\n        (src[key].constructor == Object ||\n          src[key].constructor == Array ||\n          src[key].constructor == null)) {\n        dst[key] = ntils.mix(dst[key], src[key], igonres, 0);\n      } else {\n        dst[key] = src[key];\n      }\n    }, this);\n    return dst;\n  };\n\n  /**\n   * 定义不可遍历的属性\n   **/\n  ntils.defineFreezeProp = function (obj, name, value) {\n    try {\n      Object.defineProperty(obj, name, {\n        value: value,\n        enumerable: false,\n        configurable: true, //能不能重写定义\n        writable: false //能不能用「赋值」运算更改\n      });\n    } catch (err) {\n      obj[name] = value;\n    }\n  };\n\n  /**\n   * 获取所有 key \n   */\n  ntils.keys = function (obj) {\n    if (Object.keys) return Object.keys(obj);\n    var keys = [];\n    this.each(obj, function (key) {\n      keys.push(key);\n    });\n    return keys;\n  };\n\n  /**\n   * 创建一个对象\n   */\n  ntils.create = function (proto, props) {\n    if (Object.create) return Object.create(proto, props);\n    var Cotr = function () { };\n    Cotr.prototype = proto;\n    var obj = new Cotr();\n    if (props) this.copy(props, obj);\n    return obj;\n  };\n\n  /**\n   * 设置 proto\n   * 在不支持 setPrototypeOf 也不支持 __proto__ 的浏览器\n   * 中，会采用 copy 方式\n   */\n  ntils.setPrototypeOf = function (obj, proto) {\n    if (Object.setPrototypeOf) {\n      return Object.setPrototypeOf(obj, proto || this.create(null));\n    } else {\n      if (!('__proto__' in Object)) this.copy(proto, obj);\n      obj.__proto__ = proto;\n    }\n  };\n\n  /**\n   * 获取 proto\n   */\n  ntils.getPrototypeOf = function (obj) {\n    if (obj.__proto__) return obj.__proto__;\n    if (Object.getPrototypeOf) return Object.getPrototypeOf(obj);\n    if (obj.constructor) return obj.constructor.prototype;\n  };\n\n  /**\n   * 是否深度相等\n   */\n  ntils.deepEqual = function (a, b) {\n    if (a === b) return true;\n    if (!this.isObject(a) || !this.isObject(b)) return false;\n    var aKeys = this.keys(a);\n    var bKeys = this.keys(b);\n    if (aKeys.length !== bKeys.length) return false;\n    var allKeys = aKeys.concat(bKeys);\n    var checkedMap = this.create(null);\n    var result = true;\n    this.each(allKeys, function (i, key) {\n      if (checkedMap[key]) return;\n      if (!this.deepEqual(a[key], b[key])) result = false;\n      checkedMap[key] = true;\n    }, this);\n    return result;\n  };\n\n  /**\n   * 从一个数值循环到别一个数\n   * @param {number} fromNum 开始数值\n   * @param {Number} toNum 结束数值\n   * @param {Number} step 步长值\n   * @param {function} handler 执行函数\n   * @returns {void} 无返回\n   */\n  ntils.fromTo = function (fromNum, toNum, step, handler) {\n    if (!handler) handler = [step, step = handler][0];\n    step = Math.abs(step || 1);\n    if (fromNum < toNum) {\n      for (var i = fromNum; i <= toNum; i += step) handler(i);\n    } else {\n      for (var i = fromNum; i >= toNum; i -= step) handler(i);\n    }\n  };\n\n  /**\n   * 生成一个Guid\n   * @method newGuid\n   * @return {String} GUID字符串\n   * @static\n   */\n  ntils.newGuid = function () {\n    var S4 = function () {\n      return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n    };\n    return (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4());\n  };\n\n  /**\n   * 对象变换\n   **/\n  ntils.map = function (list, fn) {\n    var buffer = this.isArray(list) ? [] : {};\n    this.each(list, function (name, value) {\n      buffer[name] = fn(name, value);\n    });\n    return buffer;\n  };\n\n  /**\n   * 通过路径设置属性值\n   */\n  ntils.setByPath = function (obj, path, value) {\n    if (this.isNull(obj) || this.isNull(path) || path === '') {\n      return;\n    }\n    if (!this.isArray(path)) {\n      path = path.replace(/\\[/, '.').replace(/\\]/, '.').split('.');\n    }\n    this.each(path, function (index, name) {\n      if (this.isNull(name) || name.length < 1) return;\n      if (index === path.length - 1) {\n        obj[name] = value;\n      } else {\n        obj[name] = obj[name] || {};\n        obj = obj[name];\n      }\n    }, this);\n  };\n\n  /**\n   * 通过路径获取属性值\n   */\n  ntils.getByPath = function (obj, path) {\n    if (this.isNull(obj) || this.isNull(path) || path === '') {\n      return obj;\n    }\n    if (!this.isArray(path)) {\n      path = path.replace(/\\[/, '.').replace(/\\]/, '.').split('.');\n    }\n    this.each(path, function (index, name) {\n      if (this.isNull(name) || name.length < 1) return;\n      if (!this.isNull(obj)) obj = obj[name];\n    }, this);\n    return obj;\n  };\n\n  /**\n   * 数组去重\n   **/\n  ntils.unique = function (array) {\n    if (this.isNull(array)) return array;\n    var newArray = [];\n    this.each(array, function (i, value) {\n      if (newArray.indexOf(value) > -1) return;\n      newArray.push(value);\n    });\n    return newArray;\n  };\n\n  /**\n   * 解析 function 的参数列表\n   **/\n  ntils.getFunctionArgumentNames = function (fn) {\n    if (!fn) return [];\n    var src = fn.toString();\n    var parts = src.split(')')[0].split('=>')[0].split('(');\n    return (parts[1] || parts[0]).split(',').map(function (name) {\n      return name.trim();\n    }).filter(function (name) {\n      return name != 'function';\n    });\n  };\n\n  /**\n   * 缩短字符串\n   */\n  ntils.short = function (str, maxLength) {\n    if (!str) return str;\n    maxLength = maxLength || 40;\n    var strLength = str.length;\n    var trimLength = maxLength / 2;\n    return strLength > maxLength ? str.substr(0, trimLength) + '...' + str.substr(strLength - trimLength) : str;\n  };\n\n  /**\n   * 首字母大写\n   */\n  ntils.firstUpper = function (str) {\n    if (this.isNull(str)) return;\n    str[0] = str[0].toLowerCase();\n    return str;\n  };\n\n  /**\n   * 编码正则字符串\n   */\n  ntils.escapeRegExp = function (str) {\n    return str.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n  };\n\n  /**\n   * 解析字符串为 dom \n   * @param {string} str 字符串\n   * @returns {HTMLNode} 解析后的 DOM \n   */\n  ntils.parseDom = function (str) {\n    this._PDD_ = this._PDD_ || document.createElement('div');\n    this._PDD_.innerHTML = ntils.trim(str);\n    var firstNode = this._PDD_.childNodes[0];\n    //先 clone 一份再通过 innerHTML 清空\n    //否则 IE9 下，清空时会导出返回的 DOM 没有子结点\n    if (firstNode) firstNode = firstNode.cloneNode(true);\n    this._PDD_.innerHTML = '';\n    return firstNode;\n  };\n\n})((typeof exports === 'undefined') ? (window.ntils = {}) : exports);\n\n\n// WEBPACK FOOTER //\n// ./~/.2.0.15@ntils/index.js","const mokit = require('mokit-plugin').mokit;\nconst Class = mokit.Class;\nconst EventEmitter = mokit.EventEmitter;\n\nconst SEPARATOR = '#!';\nconst ROOT_PATH = '/';\n\n/**\n * 基于 has 的路由驱动\n */\nconst HashDriver = new Class({\n  $name: 'HashDriver',\n  $extends: EventEmitter,\n\n  /**\n   * 路由驱动构造函数\n   * @param {Object} router 路径实例\n   * @returns {void} 无返回\n   */\n  constructor: function (router) {\n    this.$super();\n    this.router = router;\n    window.addEventListener('hashchange', function () {\n      this._onChange();\n    }.bind(this));\n  },\n\n  /**\n   * 获取当前路径\n   * @returns {string} 当前路径\n   */\n  get: function () {\n    return location.hash.split(SEPARATOR)[1] || ROOT_PATH;\n  },\n\n  /**\n   * 设置当前路径\n   * @param {string} path 要转到的路径\n   * @returns {void} 无返回\n   */\n  set: function (path) {\n    path = path || ROOT_PATH;\n    location.hash = SEPARATOR + path;\n  },\n\n  /**\n   * 路由发生变化时的处理函数\n   * @param {string} path 将要转到的路径\n   * @returns {void} 无返回\n   */\n  _onChange: function (path) {\n    path = path || this.get() || '';\n    if (path[0] != ROOT_PATH) path = ROOT_PATH + path;\n    this.emit('changed', path);\n  }\n\n});\n\nmodule.exports = HashDriver;\n\n\n// WEBPACK FOOTER //\n// ./lib/drivers/hash.js","const mokit = require('mokit-plugin').mokit;\nconst View = mokit.components.View;\n\nconst RouterView = View.extend({\n  properties: {\n    router: {\n      test: function (router) {\n        return !!router;\n      },\n      get: function () {\n        return this._router;\n      },\n      set: function (router) {\n        this._router = router;\n        this._router.view = this;\n      }\n    }\n  },\n  onCreated: function () {\n    if (!this.router && this.$router) {\n      this.router = this.$router;\n    }\n  }\n});\n\nmodule.exports = RouterView;\n\n\n// WEBPACK FOOTER //\n// ./lib/components/router-view.js","const mokit = require('mokit-plugin').mokit;\nconst Directive = mokit.Directive;\nconst EventEmitter = mokit.EventEmitter;\n\nmodule.exports = new Directive({\n  literal: true,\n\n  bind: function () {\n    let eventTarget = this.node.$target || this.node;\n    this.emiter = new EventEmitter(eventTarget);\n    this.emiter.addListener(this.decorates[0] || 'click', function () {\n      if (!this.scope || !this.scope.$router) return;\n      this.scope.$router.go(this.path, eventTarget.transition);\n    }.bind(this), false);\n  },\n\n  unbind: function () {\n    this.emiter.removeListener();\n  },\n\n  update: function (path) {\n    this.path = path;\n  }\n\n});\n\n\n// WEBPACK FOOTER //\n// ./lib/directives/link.js"],"sourceRoot":""}